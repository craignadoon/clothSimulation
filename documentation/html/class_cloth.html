<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>ClothSimulation: Cloth Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="classes.html"><span>Class&nbsp;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Cloth Class Reference</h1><!-- doxytag: class="Cloth" -->
<p>this class creates the cloth according to mass-spring model it updates the cloth with respect to the internal spring forces and the external force acting on the cloth the mass particle(connecting the springs) states are updated using the RK4 integrator  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_cloth_8h_source.html">Cloth.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for Cloth:</div>
<div class="dynsection">
<div class="center"><img src="class_cloth__coll__graph.png" border="0" usemap="#_cloth_coll__map" alt="Collaboration graph"/></div>
<map name="_cloth_coll__map" id="_cloth_coll__map">
<area shape="rect" id="node2" href="class_cloth_particle.html" title="{ClothParticle\n|+ m_mass\l+ m_fixed\l+ m_force\l+ m_timestep\l+ m_t\l+ m_gravity\l|+ ClothParticle()\l+ ClothParticle()\l+ applyGravity()\l+ update()\l+ motionFunction()\l+ getPosition()\l+ getVelocity()\l+ setPosition()\l+ setVelocity()\l+ setFixed()\l+ setNotFixed()\l}" alt="" coords="95,1361,244,1706"/><area shape="rect" id="node4" href="class_abstract_r_k4_integrator.html" title="a simple base class to do RK4 integration this class then needs the motionFunction..." alt="" coords="5,1059,216,1266"/><area shape="rect" id="node6" href="class_state.html" title="a simple class to hold State values for the integrator, this is used for the derivitives..." alt="" coords="56,743,165,863"/><area shape="rect" id="node8" href="class_particle_octree.html" title="{ParticleOctree\n||+ ParticleOctree()\l+ checkCollisionOnNode()\l}" alt="" coords="273,1482,465,1585"/><area shape="rect" id="node10" href="class_abstract_octree.html" title="{AbstractOctree\&lt; ClothParticle, ngl::Vec3 \&gt;\n|# m_root\l|+ AbstractOctree()\l+ ~AbstractOctree()\l+ deleteTreeNode()\l+ createTree()\l+ addObject()\l+ checkBounds()\l+ checkBounds()\l+ checkBounds()\l+ addObjectToNode()\l+ clearTree()\l+ clearObjectFromNode()\l+ checkCollision()\l+ checkCollisionOnNode()\l}" alt="" coords="240,1016,557,1309"/><area shape="rect" id="node12" href="class_abstract_octree_1_1_tree_node.html" title="{AbstractOctree\&lt; T, VEC \&gt;::TreeNode\&lt; ClothParticle \&gt;\n|+ m_limit\l+ m_height\l+ m_objectList\l+ m_child\l|}" alt="" coords="43,451,437,589"/><area shape="rect" id="node14" href="class_abstract_octree_1_1_tree_node.html" title="{AbstractOctree\&lt; T, VEC \&gt;::TreeNode\&lt; V \&gt;\n|+ m_limit\l+ m_height\l+ m_objectList\l+ m_child\l|}" alt="" coords="297,246,615,383"/><area shape="rect" id="node23" href="class_abstract_octree_1_1_tree_node.html" title="{AbstractOctree\&lt; T, VEC \&gt;::TreeNode\&lt; T \&gt;\n|+ m_limit\l+ m_height\l+ m_objectList\l+ m_child\l|}" alt="" coords="461,451,776,589"/><area shape="rect" id="node17" href="class_bounding_box.html" title="{BoundingBox\n|+ m_minx\l+ m_maxx\l+ m_miny\l+ m_maxy\l+ m_minz\l+ m_maxz\l|}" alt="" coords="401,6,511,178"/><area shape="rect" id="node21" href="class_abstract_octree.html" title="this is the class for perfect octree tree, 3 levels," alt="" coords="440,656,643,949"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="class_cloth-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cloth.html#a74849e3c74939d015df740d2586cc0e9">Cloth</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Constructor.  <a href="#a74849e3c74939d015df740d2586cc0e9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cloth.html#ac55614c4a95de2faab95a3e8e8c8aa28">Cloth</a> (std::string _texture)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Constructor.  <a href="#ac55614c4a95de2faab95a3e8e8c8aa28"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cloth.html#a1530e0e5b2495e716092dba6a260da91">~Cloth</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">basket destructor  <a href="#a1530e0e5b2495e716092dba6a260da91"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cloth.html#abdd2de6586d933a083b6e3242c7f3f87">createCloth</a> (double _n, std::string _texture)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">method to create the cloth grid and its spring connections  <a href="#abdd2de6586d933a083b6e3242c7f3f87"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cloth.html#a0d9edc32dee9ceaead679f3b904262d2">drawTriCloth</a> (const std::string &amp;_shaderName, ngl::TransformStack &amp;_transformStack, ngl::Camera *_cam)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Draw method for drawing the cloth.  <a href="#a0d9edc32dee9ceaead679f3b904262d2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cloth.html#ad26926a8404ce36de4a540c38903a6b3">updateCloth</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">method to update the cloth- forces(internal and external) and update the mass particles according to RK4 integrator state values  <a href="#ad26926a8404ce36de4a540c38903a6b3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cloth.html#a98c53cc7b566cb175e25185e1355c503">applyWindForce</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cloth.html#a15ed669daa76271204a59fedde127868">createSpring</a> (int _id, <a class="el" href="class_cloth_particle.html">ClothParticle</a> *_vertA, <a class="el" href="class_cloth_particle.html">ClothParticle</a> *_vertB, int _sptype)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cloth.html#a03d78189c0af51a22b1d06152c52c8d6">drawSpring</a> (ngl::Vec3 _vertA, ngl::Vec3 _vertB, int _sptype)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cloth.html#a213f8c391b3a666177c58dc4ca4994c4">drawSpring</a> (<a class="el" href="class_cloth_spring.html">ClothSpring</a> _cs)</td></tr>
<tr><td colspan="2"><h2>Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cloth.html#aa9fadb08dbfbd2cdcd795a05b1822b8e">m_horiParticles</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">number of horizontal mass particles  <a href="#aa9fadb08dbfbd2cdcd795a05b1822b8e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cloth.html#ab45593ee4b2687538d946c73ddfea492">m_vertParticles</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">number of vertical mass particles  <a href="#ab45593ee4b2687538d946c73ddfea492"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cloth.html#a77d2938ecfb108321be9d5252a147117">mWidth</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">cloth width  <a href="#a77d2938ecfb108321be9d5252a147117"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cloth.html#a708b4b915911e7c74bc65ae0b0b734f2">mHeight</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">cloth height  <a href="#a708b4b915911e7c74bc65ae0b0b734f2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="class_cloth_particle.html">ClothParticle</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cloth.html#add1ba761667b31248900268047a09065">m_massVert</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">vector array for the cloth's mass particles  <a href="#add1ba761667b31248900268047a09065"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="class_cloth_particle.html">ClothParticle</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cloth.html#ab1c7dfb259e4f47610545828241dce44">m_triArray</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">vector array for the cloth's mass particles stored as a traingular mesh  <a href="#ab1c7dfb259e4f47610545828241dce44"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cloth.html#a78b4b9f5ef642c351a5242a8fab4a2fe">m_fix</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">bool to keep cloth fixed for simulations  <a href="#a78b4b9f5ef642c351a5242a8fab4a2fe"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cloth.html#ae060f23b57c590b6afc0f571a44d767e">m_applyOctree</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">bool to give user the choie of applying octree  <a href="#ae060f23b57c590b6afc0f571a44d767e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cloth.html#a214dcb56aa2328e4f2d21ab35d76fbaf">m_windMag</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">wind magnitude that can be added via user interface  <a href="#a214dcb56aa2328e4f2d21ab35d76fbaf"></a><br/></td></tr>
<tr><td colspan="2"><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cloth.html#acdcb21d1a164861da55d5ff238fff544">collisionWithBalls</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">method to check for self collision detection between cloth mass particles to prevent penetration  <a href="#acdcb21d1a164861da55d5ff238fff544"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cloth.html#aae971ca955a907ea2e76cf9b8e9b7c55">loadMatricesToShader</a> (ngl::TransformStack &amp;_tx, ngl::Camera *_cam) const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">load all the transform values to the shader  <a href="#aae971ca955a907ea2e76cf9b8e9b7c55"></a><br/></td></tr>
<tr><td colspan="2"><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">ngl::Vec3&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cloth.html#a631f4600e92b1aca4dd58e7d944cd4c5">m_gravity</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">forces  <a href="#a631f4600e92b1aca4dd58e7d944cd4c5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structmass_points.html">massPoints</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cloth.html#a3a98452fbbb8f4adab213e046f694c6c">m_vertData</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">mass point vertices data - for drawing the triangulated cloth mesh  <a href="#a3a98452fbbb8f4adab213e046f694c6c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="class_cloth_spring.html">ClothSpring</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cloth.html#ae2aeb11b90b86c1ea9060a7bc2c2a5e2">m_clothSpringArr</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">vector containg all the springs in the cloth  <a href="#ae2aeb11b90b86c1ea9060a7bc2c2a5e2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_cloth_particle.html">ClothParticle</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cloth.html#a7f46f8974f4a0da8d792913c2f899d8f">m_massVertex</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">vector containg all the springs in the cloth  <a href="#a7f46f8974f4a0da8d792913c2f899d8f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">GLuint&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cloth.html#a8082f75ab41e63b44a613c4b0b776c04">m_textureID</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">cloth texture id  <a href="#a8082f75ab41e63b44a613c4b0b776c04"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_particle_octree.html">ParticleOctree</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cloth.html#ac8ddf555eb178ab5aec3675446d991d4">collisionTree</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">octree for collision detection  <a href="#ac8ddf555eb178ab5aec3675446d991d4"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>this class creates the cloth according to mass-spring model it updates the cloth with respect to the internal spring forces and the external force acting on the cloth the mass particle(connecting the springs) states are updated using the RK4 integrator </p>
<p>his class contains all meshes required in the simulation using this class, we load meshes once which can be attached to objects in simulation</p>
<p>this class creates the cloth's springs creating the cloth structure and gives it the properties of streching, shear and bending</p>
<p>this class creates the cloth's mass particles connecting the springs together. the state of the mass particle is determined by the position and velocity calculated using the RK4 integrator </p>

<p>Definition at line <a class="el" href="_cloth_8h_source.html#l00046">46</a> of file <a class="el" href="_cloth_8h_source.html">Cloth.h</a>.</p>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a74849e3c74939d015df740d2586cc0e9"></a><!-- doxytag: member="Cloth::Cloth" ref="a74849e3c74939d015df740d2586cc0e9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Cloth::Cloth </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Constructor. </p>

<p>Definition at line <a class="el" href="_cloth_8cpp_source.html#l00006">6</a> of file <a class="el" href="_cloth_8cpp_source.html">Cloth.cpp</a>.</p>

<p>References <a class="el" href="_cloth_8h_source.html#l00070">m_horiParticles</a>, <a class="el" href="_cloth_8h_source.html#l00075">m_vertParticles</a>, <a class="el" href="_cloth_8h_source.html#l00085">mHeight</a>, and <a class="el" href="_cloth_8h_source.html#l00080">mWidth</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00006"></a>00006             {
<a name="l00007"></a>00007     <a class="code" href="class_cloth.html#aa9fadb08dbfbd2cdcd795a05b1822b8e" title="number of horizontal mass particles">m_horiParticles</a> = 10.0f; <span class="comment">//10 20    60</span>
<a name="l00008"></a>00008     <a class="code" href="class_cloth.html#ab45593ee4b2687538d946c73ddfea492" title="number of vertical mass particles">m_vertParticles</a> = 10.0f; <span class="comment">//10 20    60</span>
<a name="l00009"></a>00009     <a class="code" href="class_cloth.html#a77d2938ecfb108321be9d5252a147117" title="cloth width">mWidth</a> = 10.0f;         <span class="comment">//5</span>
<a name="l00010"></a>00010     <a class="code" href="class_cloth.html#a708b4b915911e7c74bc65ae0b0b734f2" title="cloth height">mHeight</a> = 10.0f;        <span class="comment">//5</span>
<a name="l00011"></a>00011 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac55614c4a95de2faab95a3e8e8c8aa28"></a><!-- doxytag: member="Cloth::Cloth" ref="ac55614c4a95de2faab95a3e8e8c8aa28" args="(std::string _texture)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Cloth::Cloth </td>
          <td>(</td>
          <td class="paramtype">std::string&nbsp;</td>
          <td class="paramname"> <em>_texture</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Constructor. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>_texture</em>&nbsp;</td><td>cloth texture </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_cloth_8cpp_source.html#l00013">13</a> of file <a class="el" href="_cloth_8cpp_source.html">Cloth.cpp</a>.</p>

<p>References <a class="el" href="_cloth_8h_source.html#l00175">collisionTree</a>, <a class="el" href="_cloth_8h_source.html#l00103">m_applyOctree</a>, <a class="el" href="_cloth_8h_source.html#l00070">m_horiParticles</a>, <a class="el" href="_abstract_octree_8h_source.html#l00025">BoundingBox::m_maxx</a>, <a class="el" href="_abstract_octree_8h_source.html#l00027">BoundingBox::m_maxy</a>, <a class="el" href="_abstract_octree_8h_source.html#l00029">BoundingBox::m_maxz</a>, <a class="el" href="_abstract_octree_8h_source.html#l00024">BoundingBox::m_minx</a>, <a class="el" href="_abstract_octree_8h_source.html#l00026">BoundingBox::m_miny</a>, <a class="el" href="_abstract_octree_8h_source.html#l00028">BoundingBox::m_minz</a>, <a class="el" href="_cloth_8h_source.html#l00170">m_textureID</a>, <a class="el" href="_cloth_8h_source.html#l00075">m_vertParticles</a>, <a class="el" href="_cloth_8h_source.html#l00107">m_windMag</a>, <a class="el" href="_cloth_8h_source.html#l00085">mHeight</a>, and <a class="el" href="_cloth_8h_source.html#l00080">mWidth</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00016"></a>00016 {
<a name="l00017"></a>00017     <a class="code" href="class_cloth.html#aa9fadb08dbfbd2cdcd795a05b1822b8e" title="number of horizontal mass particles">m_horiParticles</a> = 10.0f; <span class="comment">//10 20    60</span>
<a name="l00018"></a>00018     <a class="code" href="class_cloth.html#ab45593ee4b2687538d946c73ddfea492" title="number of vertical mass particles">m_vertParticles</a> = 10.0f; <span class="comment">//10 20    60</span>
<a name="l00019"></a>00019     <a class="code" href="class_cloth.html#a77d2938ecfb108321be9d5252a147117" title="cloth width">mWidth</a> = 5.0f;      <span class="comment">//5</span>
<a name="l00020"></a>00020     <a class="code" href="class_cloth.html#a708b4b915911e7c74bc65ae0b0b734f2" title="cloth height">mHeight</a> = 5.0f;     <span class="comment">//5</span>
<a name="l00021"></a>00021 
<a name="l00022"></a>00022     <span class="comment">//texture</span>
<a name="l00023"></a>00023     ngl::Texture tex(_texture);
<a name="l00024"></a>00024     <a class="code" href="class_cloth.html#a8082f75ab41e63b44a613c4b0b776c04" title="cloth texture id">m_textureID</a>=tex.setTextureGL();
<a name="l00025"></a>00025     <a class="code" href="class_bounding_box.html">BoundingBox</a> bb;
<a name="l00026"></a>00026         bb.<a class="code" href="class_bounding_box.html#a258947af38a1fd2be5cfd748702b38cd">m_minx</a> = bb.<a class="code" href="class_bounding_box.html#afac5177c4ec0e7fabc16eab1cdbdfafe">m_miny</a> = bb.<a class="code" href="class_bounding_box.html#a0261ebe3220714d53be827803e72dbc2">m_minz</a> = -10.0;
<a name="l00027"></a>00027         bb.<a class="code" href="class_bounding_box.html#accac5d66b22d132a94935c079ee25b40">m_maxx</a> = bb.<a class="code" href="class_bounding_box.html#a645ee20e05db317741f7c72e0f35da31">m_maxy</a> = bb.<a class="code" href="class_bounding_box.html#a8e35ea84f95c8adaa0c68add6df2c0d3">m_maxz</a> = 10.0;
<a name="l00028"></a>00028         <a class="code" href="class_cloth.html#ac8ddf555eb178ab5aec3675446d991d4" title="octree for collision detection">collisionTree</a> = <span class="keyword">new</span> <a class="code" href="class_particle_octree.html">ParticleOctree</a> (4, bb); <span class="comment">// control the height of the octree</span>
<a name="l00029"></a>00029         <a class="code" href="class_cloth.html#ae060f23b57c590b6afc0f571a44d767e" title="bool to give user the choie of applying octree">m_applyOctree</a> = <span class="keyword">false</span>;
<a name="l00030"></a>00030     <a class="code" href="class_cloth.html#a214dcb56aa2328e4f2d21ab35d76fbaf" title="wind magnitude that can be added via user interface">m_windMag</a> = 0.0;
<a name="l00031"></a>00031 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a1530e0e5b2495e716092dba6a260da91"></a><!-- doxytag: member="Cloth::~Cloth" ref="a1530e0e5b2495e716092dba6a260da91" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Cloth::~Cloth </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>basket destructor </p>

<p>Definition at line <a class="el" href="_cloth_8cpp_source.html#l00033">33</a> of file <a class="el" href="_cloth_8cpp_source.html">Cloth.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00034"></a>00034 {
<a name="l00035"></a>00035     <span class="comment">//delete m_clothSpring;</span>
<a name="l00036"></a>00036 }
</pre></div></p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a98c53cc7b566cb175e25185e1355c503"></a><!-- doxytag: member="Cloth::applyWindForce" ref="a98c53cc7b566cb175e25185e1355c503" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Cloth::applyWindForce </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_cloth_8cpp_source.html#l00326">326</a> of file <a class="el" href="_cloth_8cpp_source.html">Cloth.cpp</a>.</p>

<p>References <a class="el" href="_cloth_8h_source.html#l00095">m_triArray</a>, and <a class="el" href="_cloth_8h_source.html#l00107">m_windMag</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00327"></a>00327 {
<a name="l00328"></a>00328     <span class="comment">//6- wind forces</span>
<a name="l00329"></a>00329      <span class="keywordflow">for</span>(std::vector&lt;ngl::Vec3&gt;::size_type i=0;i&lt;<a class="code" href="class_cloth.html#ab1c7dfb259e4f47610545828241dce44" title="vector array for the cloth&amp;#39;s mass particles stored as a traingular mesh">m_triArray</a>.size();i+=3)
<a name="l00330"></a>00330      {
<a name="l00331"></a>00331          ngl::Vec3 nor,d,direction;
<a name="l00332"></a>00332          ngl::Vec3 p1 = <a class="code" href="class_cloth.html#ab1c7dfb259e4f47610545828241dce44" title="vector array for the cloth&amp;#39;s mass particles stored as a traingular mesh">m_triArray</a>[i]-&gt;getPosition();
<a name="l00333"></a>00333          ngl::Vec3 p2 = <a class="code" href="class_cloth.html#ab1c7dfb259e4f47610545828241dce44" title="vector array for the cloth&amp;#39;s mass particles stored as a traingular mesh">m_triArray</a>[i+1]-&gt;getPosition();
<a name="l00334"></a>00334          ngl::Vec3 p3 = <a class="code" href="class_cloth.html#ab1c7dfb259e4f47610545828241dce44" title="vector array for the cloth&amp;#39;s mass particles stored as a traingular mesh">m_triArray</a>[i+2]-&gt;getPosition();
<a name="l00335"></a>00335         <span class="comment">// std::cout&lt;&lt;i&lt;&lt;&quot;: p1= &quot;&lt;&lt;p1&lt;&lt;&quot;\t p2=&quot;&lt;&lt;p2&lt;&lt;&quot;\t p3 =&quot;&lt;&lt;p3&lt;&lt;std::endl;</span>
<a name="l00336"></a>00336 
<a name="l00337"></a>00337          nor = calcNormal(p1,p2,p3);
<a name="l00338"></a>00338          <span class="comment">//nor.normalize();</span>
<a name="l00339"></a>00339          <span class="comment">//d.set((nor.normalize();));</span>
<a name="l00340"></a>00340 
<a name="l00341"></a>00341          ngl::Vec3 wind;
<a name="l00342"></a>00342          wind.set(0.001,0,-0.001);
<a name="l00343"></a>00343 
<a name="l00344"></a>00344          wind.m_x += <a class="code" href="class_cloth.html#a214dcb56aa2328e4f2d21ab35d76fbaf" title="wind magnitude that can be added via user interface">m_windMag</a>;
<a name="l00345"></a>00345          wind.m_z += <a class="code" href="class_cloth.html#a214dcb56aa2328e4f2d21ab35d76fbaf" title="wind magnitude that can be added via user interface">m_windMag</a>;
<a name="l00346"></a>00346          direction.set(wind);
<a name="l00347"></a>00347 
<a name="l00348"></a>00348          ngl::Vec3 f = nor*direction;
<a name="l00349"></a>00349          <a class="code" href="class_cloth.html#ab1c7dfb259e4f47610545828241dce44" title="vector array for the cloth&amp;#39;s mass particles stored as a traingular mesh">m_triArray</a>[i]-&gt;m_force+=f;
<a name="l00350"></a>00350          <a class="code" href="class_cloth.html#ab1c7dfb259e4f47610545828241dce44" title="vector array for the cloth&amp;#39;s mass particles stored as a traingular mesh">m_triArray</a>[i+1]-&gt;m_force+=f;
<a name="l00351"></a>00351          <a class="code" href="class_cloth.html#ab1c7dfb259e4f47610545828241dce44" title="vector array for the cloth&amp;#39;s mass particles stored as a traingular mesh">m_triArray</a>[i+2]-&gt;m_force+=f;
<a name="l00352"></a>00352      }
<a name="l00353"></a>00353 }
</pre></div></p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="class_cloth_a98c53cc7b566cb175e25185e1355c503_icgraph.png" border="0" usemap="#class_cloth_a98c53cc7b566cb175e25185e1355c503_icgraph_map" alt=""></div>
<map name="class_cloth_a98c53cc7b566cb175e25185e1355c503_icgraph_map" id="class_cloth_a98c53cc7b566cb175e25185e1355c503_icgraph">
<area shape="rect" id="node3" href="class_g_l_window.html#a8901509418ab117e8613d624df9b5666" title="timer event trigered by startTimer" alt="" coords="228,5,404,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="acdcb21d1a164861da55d5ff238fff544"></a><!-- doxytag: member="Cloth::collisionWithBalls" ref="acdcb21d1a164861da55d5ff238fff544" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Cloth::collisionWithBalls </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>method to check for self collision detection between cloth mass particles to prevent penetration </p>

<p>Definition at line <a class="el" href="_cloth_8cpp_source.html#l00312">312</a> of file <a class="el" href="_cloth_8cpp_source.html">Cloth.cpp</a>.</p>

<p>References <a class="el" href="_abstract_octree_8h_source.html#l00137">AbstractOctree&lt; T, VEC &gt;::addObject()</a>, <a class="el" href="_abstract_octree_8h_source.html#l00219">AbstractOctree&lt; T, VEC &gt;::checkCollision()</a>, <a class="el" href="_abstract_octree_8h_source.html#l00198">AbstractOctree&lt; T, VEC &gt;::clearTree()</a>, <a class="el" href="_cloth_8h_source.html#l00175">collisionTree</a>, and <a class="el" href="_cloth_8h_source.html#l00090">m_massVert</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00313"></a>00313 {
<a name="l00314"></a>00314     <a class="code" href="class_cloth.html#ac8ddf555eb178ab5aec3675446d991d4" title="octree for collision detection">collisionTree</a>-&gt;<a class="code" href="class_abstract_octree.html#a6b57da99d6ae9154ab6183a96655759b" title="clear off all the Ts from the tree">clearTree</a>();
<a name="l00315"></a>00315 
<a name="l00316"></a>00316 <span class="comment">//    for(std::list&lt;ClothParticle *&gt;::iterator itr = m_massVert.begin(); itr!= m_massVert.end(); ++itr)</span>
<a name="l00317"></a>00317 <span class="comment">//    {</span>
<a name="l00318"></a>00318         <span class="keywordflow">for</span>(std::vector&lt;ClothParticle *&gt;::size_type i=0;i&lt;<a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>.size()-1;++i)
<a name="l00319"></a>00319         {
<a name="l00320"></a>00320 
<a name="l00321"></a>00321             <a class="code" href="class_cloth.html#ac8ddf555eb178ab5aec3675446d991d4" title="octree for collision detection">collisionTree</a>-&gt;<a class="code" href="class_abstract_octree.html#aa12fa4d09ef005992b61bf9853478c4f" title="add a T into the tree, add the partile to all the leaves collide with">addObject</a>(<a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>[i]);
<a name="l00322"></a>00322     }
<a name="l00323"></a>00323     <a class="code" href="class_cloth.html#ac8ddf555eb178ab5aec3675446d991d4" title="octree for collision detection">collisionTree</a>-&gt;<a class="code" href="class_abstract_octree.html#a5b6dc329a11f2cead34659007f8c62a6" title="check the collision for the Ts in each leaves">checkCollision</a>();
<a name="l00324"></a>00324 }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="class_cloth_acdcb21d1a164861da55d5ff238fff544_cgraph.png" border="0" usemap="#class_cloth_acdcb21d1a164861da55d5ff238fff544_cgraph_map" alt=""></div>
<map name="class_cloth_acdcb21d1a164861da55d5ff238fff544_cgraph_map" id="class_cloth_acdcb21d1a164861da55d5ff238fff544_cgraph">
<area shape="rect" id="node3" href="class_abstract_octree.html#aa12fa4d09ef005992b61bf9853478c4f" title="add a T into the tree, add the partile to all the leaves collide with" alt="" coords="247,5,457,35"/><area shape="rect" id="node5" href="class_abstract_octree.html#a5b6dc329a11f2cead34659007f8c62a6" title="check the collision for the Ts in each leaves" alt="" coords="236,59,468,88"/><area shape="rect" id="node7" href="class_abstract_octree.html#a6b57da99d6ae9154ab6183a96655759b" title="clear off all the Ts from the tree" alt="" coords="251,112,453,141"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="class_cloth_acdcb21d1a164861da55d5ff238fff544_icgraph.png" border="0" usemap="#class_cloth_acdcb21d1a164861da55d5ff238fff544_icgraph_map" alt=""></div>
<map name="class_cloth_acdcb21d1a164861da55d5ff238fff544_icgraph_map" id="class_cloth_acdcb21d1a164861da55d5ff238fff544_icgraph">
<area shape="rect" id="node3" href="class_cloth.html#ad26926a8404ce36de4a540c38903a6b3" title="method to update the cloth&#45; forces(internal and external) and update the mass particles..." alt="" coords="235,5,387,35"/><area shape="rect" id="node5" href="class_g_l_window.html#a8901509418ab117e8613d624df9b5666" title="timer event trigered by startTimer" alt="" coords="436,5,612,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="abdd2de6586d933a083b6e3242c7f3f87"></a><!-- doxytag: member="Cloth::createCloth" ref="abdd2de6586d933a083b6e3242c7f3f87" args="(double _n, std::string _texture)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Cloth::createCloth </td>
          <td>(</td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&nbsp;</td>
          <td class="paramname"> <em>_texture</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>method to create the cloth grid and its spring connections </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>_n</em>&nbsp;</td><td>number of horizontal and vertical particles </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_cloth_8cpp_source.html#l00038">38</a> of file <a class="el" href="_cloth_8cpp_source.html">Cloth.cpp</a>.</p>

<p>References <a class="el" href="_cloth_8cpp_source.html#l00264">createSpring()</a>, <a class="el" href="_cloth_8h_source.html#l00099">m_fix</a>, <a class="el" href="_cloth_8h_source.html#l00070">m_horiParticles</a>, <a class="el" href="_cloth_8h_source.html#l00090">m_massVert</a>, <a class="el" href="_cloth_8h_source.html#l00170">m_textureID</a>, <a class="el" href="_cloth_8h_source.html#l00075">m_vertParticles</a>, <a class="el" href="_cloth_8h_source.html#l00085">mHeight</a>, and <a class="el" href="_cloth_8h_source.html#l00080">mWidth</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00039"></a>00039 {
<a name="l00040"></a>00040     ngl::Texture tex(_texture);
<a name="l00041"></a>00041     <a class="code" href="class_cloth.html#a8082f75ab41e63b44a613c4b0b776c04" title="cloth texture id">m_textureID</a>=tex.setTextureGL();
<a name="l00042"></a>00042     <a class="code" href="class_cloth.html#aa9fadb08dbfbd2cdcd795a05b1822b8e" title="number of horizontal mass particles">m_horiParticles</a> = _n;
<a name="l00043"></a>00043     <a class="code" href="class_cloth.html#ab45593ee4b2687538d946c73ddfea492" title="number of vertical mass particles">m_vertParticles</a> = _n;
<a name="l00044"></a>00044     <span class="keywordtype">int</span> <span class="keywordtype">id</span> = 0;
<a name="l00045"></a>00045     <a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>.resize(<a class="code" href="class_cloth.html#aa9fadb08dbfbd2cdcd795a05b1822b8e" title="number of horizontal mass particles">m_horiParticles</a> * <a class="code" href="class_cloth.html#ab45593ee4b2687538d946c73ddfea492" title="number of vertical mass particles">m_vertParticles</a>);
<a name="l00046"></a>00046     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> x =0;x&lt;<a class="code" href="class_cloth.html#aa9fadb08dbfbd2cdcd795a05b1822b8e" title="number of horizontal mass particles">m_horiParticles</a>;++x)
<a name="l00047"></a>00047     {
<a name="l00048"></a>00048         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> y=0;y&lt;m_vertParticles;++y)
<a name="l00049"></a>00049         {
<a name="l00050"></a>00050             ngl::Vec3 pos;
<a name="l00051"></a>00051             pos.set(<a class="code" href="class_cloth.html#a77d2938ecfb108321be9d5252a147117" title="cloth width">mWidth</a> *(x/(<span class="keywordtype">float</span>)m_horiParticles)*2,2,<a class="code" href="class_cloth.html#a708b4b915911e7c74bc65ae0b0b734f2" title="cloth height">mHeight</a>*(y/(<span class="keywordtype">float</span>)m_vertParticles)*2);
<a name="l00052"></a>00052             ngl::Vec3 vel;
<a name="l00053"></a>00053             vel.set(0.0f,0.0f,0.0f);
<a name="l00054"></a>00054             <a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>.at(y*m_horiParticles+x)=<span class="keyword">new</span> <a class="code" href="class_cloth_particle.html">ClothParticle</a>(pos,vel,1.0f,<span class="keyword">false</span>);
<a name="l00055"></a>00055             <span class="keywordflow">if</span>(<a class="code" href="class_cloth.html#a78b4b9f5ef642c351a5242a8fab4a2fe" title="bool to keep cloth fixed for simulations">m_fix</a> == <span class="keyword">true</span>)
<a name="l00056"></a>00056             {
<a name="l00057"></a>00057                 <span class="keywordflow">if</span>(y==0)
<a name="l00058"></a>00058                 {
<a name="l00059"></a>00059     <span class="comment">//                if ((x == 0) || (x == 4) || (x == 8) || (x== m_horiParticles-9) || (x== m_horiParticles-5) || (x== m_horiParticles-1))</span>
<a name="l00060"></a>00060                       <span class="keywordflow">if</span> ((x == 0) || (x == 1) || (x == 4) || (x == 5) || (x == 8) || (x == 9) ||
<a name="l00061"></a>00061                           (x== m_horiParticles-10) || (x== m_horiParticles-9) || (x== m_horiParticles-6) || (x== m_horiParticles-5) || (x== m_horiParticles-2) || (x== m_horiParticles-1))
<a name="l00062"></a>00062 
<a name="l00063"></a>00063                     {
<a name="l00064"></a>00064                         <a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>.at(y*m_horiParticles+x)-&gt;m_fixed = <span class="keyword">true</span>;                       
<a name="l00065"></a>00065                     }
<a name="l00066"></a>00066                 }
<a name="l00067"></a>00067             }
<a name="l00068"></a>00068         }
<a name="l00069"></a>00069     }
<a name="l00070"></a>00070 
<a name="l00071"></a>00071 
<a name="l00072"></a>00072     <span class="comment">//connections</span>
<a name="l00073"></a>00073     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> x =0;x&lt;m_horiParticles;++x)
<a name="l00074"></a>00074     {
<a name="l00075"></a>00075         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> y=0;y&lt;m_vertParticles;++y)
<a name="l00076"></a>00076         {
<a name="l00077"></a>00077             <span class="comment">//structural</span>
<a name="l00078"></a>00078             <span class="keywordflow">if</span> (x&lt;m_horiParticles-1)
<a name="l00079"></a>00079             {
<a name="l00080"></a>00080                 <a class="code" href="class_cloth.html#a15ed669daa76271204a59fedde127868">createSpring</a>(<span class="keywordtype">id</span>++,<a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>[y*m_horiParticles+x],<a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>[y*m_horiParticles+x +1],0);
<a name="l00081"></a>00081             }
<a name="l00082"></a>00082             <span class="keywordflow">if</span> (y&lt;m_vertParticles-1)
<a name="l00083"></a>00083             {
<a name="l00084"></a>00084                 <a class="code" href="class_cloth.html#a15ed669daa76271204a59fedde127868">createSpring</a>(<span class="keywordtype">id</span>++,<a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>[y*m_horiParticles+x],<a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>[y*m_horiParticles+x +m_horiParticles],0);
<a name="l00085"></a>00085             }
<a name="l00086"></a>00086 
<a name="l00087"></a>00087             <span class="comment">//shear</span>
<a name="l00088"></a>00088             <span class="keywordflow">if</span> (x&lt;m_horiParticles-1 &amp;&amp; y&lt;m_vertParticles-1)
<a name="l00089"></a>00089             {
<a name="l00090"></a>00090                 <a class="code" href="class_cloth.html#a15ed669daa76271204a59fedde127868">createSpring</a>(<span class="keywordtype">id</span>++,<a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>[y*m_horiParticles+x],<a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>[y*m_horiParticles+x +m_horiParticles+1],1);
<a name="l00091"></a>00091                 <a class="code" href="class_cloth.html#a15ed669daa76271204a59fedde127868">createSpring</a>(<span class="keywordtype">id</span>++,<a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>[y*m_horiParticles+x+1],<a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>[y*m_horiParticles+x +m_horiParticles],1);
<a name="l00092"></a>00092             }
<a name="l00093"></a>00093 
<a name="l00094"></a>00094             <span class="comment">//bending</span>
<a name="l00095"></a>00095             <span class="keywordflow">if</span> (x&lt;m_horiParticles-2)
<a name="l00096"></a>00096             { <a class="code" href="class_cloth.html#a15ed669daa76271204a59fedde127868">createSpring</a>(<span class="keywordtype">id</span>++,<a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>[y*m_horiParticles+x],<a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>[y*m_horiParticles+x+2],2); }
<a name="l00097"></a>00097             <span class="keywordflow">if</span> (y&lt;m_horiParticles-2)
<a name="l00098"></a>00098             { <a class="code" href="class_cloth.html#a15ed669daa76271204a59fedde127868">createSpring</a>(<span class="keywordtype">id</span>++,<a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>[y*m_horiParticles+x],<a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>[y*m_horiParticles+x +m_horiParticles +m_horiParticles],2); }
<a name="l00099"></a>00099             <span class="keywordflow">if</span> (x&lt;m_horiParticles-2 &amp;&amp; y&lt;m_vertParticles-2)
<a name="l00100"></a>00100             {
<a name="l00101"></a>00101                 <a class="code" href="class_cloth.html#a15ed669daa76271204a59fedde127868">createSpring</a>(<span class="keywordtype">id</span>++,<a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>[y*m_horiParticles+x],<a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>[y*m_horiParticles+x +m_horiParticles +m_horiParticles+2],2);
<a name="l00102"></a>00102                 <a class="code" href="class_cloth.html#a15ed669daa76271204a59fedde127868">createSpring</a>(<span class="keywordtype">id</span>++,<a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>[y*m_horiParticles+x+2],<a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>[y*m_horiParticles+x +m_horiParticles +m_horiParticles],2);
<a name="l00103"></a>00103             }
<a name="l00104"></a>00104         }
<a name="l00105"></a>00105     }
<a name="l00106"></a>00106  }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="class_cloth_abdd2de6586d933a083b6e3242c7f3f87_cgraph.png" border="0" usemap="#class_cloth_abdd2de6586d933a083b6e3242c7f3f87_cgraph_map" alt=""></div>
<map name="class_cloth_abdd2de6586d933a083b6e3242c7f3f87_cgraph_map" id="class_cloth_abdd2de6586d933a083b6e3242c7f3f87_cgraph">
<area shape="rect" id="node3" href="class_cloth.html#a15ed669daa76271204a59fedde127868" title="Cloth::createSpring" alt="" coords="205,5,360,35"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="class_cloth_abdd2de6586d933a083b6e3242c7f3f87_icgraph.png" border="0" usemap="#class_cloth_abdd2de6586d933a083b6e3242c7f3f87_icgraph_map" alt=""></div>
<map name="class_cloth_abdd2de6586d933a083b6e3242c7f3f87_icgraph_map" id="class_cloth_abdd2de6586d933a083b6e3242c7f3f87_icgraph">
<area shape="rect" id="node3" href="class_g_l_window.html#a63bda97683454fb9e57af4487fc57e7e" title="method to set number of cloth particles it emits a signal once it has been creating..." alt="" coords="207,5,423,35"/><area shape="rect" id="node5" href="class_g_l_window.html#acaaadd067331e969703dbd0f5b2011a8" title="to start simulation" alt="" coords="472,5,619,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a15ed669daa76271204a59fedde127868"></a><!-- doxytag: member="Cloth::createSpring" ref="a15ed669daa76271204a59fedde127868" args="(int _id, ClothParticle *_vertA, ClothParticle *_vertB, int _sptype)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Cloth::createSpring </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_cloth_particle.html">ClothParticle</a> *&nbsp;</td>
          <td class="paramname"> <em>_vertA</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_cloth_particle.html">ClothParticle</a> *&nbsp;</td>
          <td class="paramname"> <em>_vertB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_sptype</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_cloth_8cpp_source.html#l00264">264</a> of file <a class="el" href="_cloth_8cpp_source.html">Cloth.cpp</a>.</p>

<p>References <a class="el" href="_cloth_8h_source.html#l00160">m_clothSpringArr</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00265"></a>00265 {
<a name="l00266"></a>00266      <a class="code" href="class_cloth_spring.html">ClothSpring</a> cs(_id, _vertA, _vertB, 300.0f, 3.0f,_sptype); <span class="comment">//40 , 1.0  150,2 (300-3 stable like a light fab)</span>
<a name="l00267"></a>00267      <a class="code" href="class_cloth.html#ae2aeb11b90b86c1ea9060a7bc2c2a5e2" title="vector containg all the springs in the cloth">m_clothSpringArr</a>.push_back(cs);
<a name="l00268"></a>00268 }
</pre></div></p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="class_cloth_a15ed669daa76271204a59fedde127868_icgraph.png" border="0" usemap="#class_cloth_a15ed669daa76271204a59fedde127868_icgraph_map" alt=""></div>
<map name="class_cloth_a15ed669daa76271204a59fedde127868_icgraph_map" id="class_cloth_a15ed669daa76271204a59fedde127868_icgraph">
<area shape="rect" id="node3" href="class_cloth.html#abdd2de6586d933a083b6e3242c7f3f87" title="method to create the cloth grid and its spring connections" alt="" coords="209,5,359,35"/><area shape="rect" id="node5" href="class_g_l_window.html#a63bda97683454fb9e57af4487fc57e7e" title="method to set number of cloth particles it emits a signal once it has been creating..." alt="" coords="409,5,625,35"/><area shape="rect" id="node7" href="class_g_l_window.html#acaaadd067331e969703dbd0f5b2011a8" title="to start simulation" alt="" coords="675,5,821,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a213f8c391b3a666177c58dc4ca4994c4"></a><!-- doxytag: member="Cloth::drawSpring" ref="a213f8c391b3a666177c58dc4ca4994c4" args="(ClothSpring _cs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Cloth::drawSpring </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_cloth_spring.html">ClothSpring</a>&nbsp;</td>
          <td class="paramname"> <em>_cs</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_cloth_8cpp_source.html#l00248">248</a> of file <a class="el" href="_cloth_8cpp_source.html">Cloth.cpp</a>.</p>

<p>References <a class="el" href="_cloth_spring_8h_source.html#l00072">ClothSpring::getPositionA()</a>, and <a class="el" href="_cloth_spring_8h_source.html#l00076">ClothSpring::getPositionB()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00249"></a>00249 {
<a name="l00250"></a>00250     std::vector &lt;ngl::Vec3&gt; points(2);
<a name="l00251"></a>00251     points[0] = _cs.<a class="code" href="class_cloth_spring.html#a8c797989f9629eedead0a5a03c38ccbd" title="method to get the position of cloth particle at end A from the integrator">getPositionA</a>();
<a name="l00252"></a>00252     points[1] = _cs.<a class="code" href="class_cloth_spring.html#ae990bff22ea49f1b2169dfc9129b16cb" title="method to get the position of cloth particle at end B from the integrator">getPositionB</a>();
<a name="l00253"></a>00253 
<a name="l00254"></a>00254     ngl::VertexArrayObject *vaoSpring = ngl::VertexArrayObject::createVOA(GL_LINES);
<a name="l00255"></a>00255     vaoSpring-&gt;bind();
<a name="l00256"></a>00256     vaoSpring-&gt;setData(2*<span class="keyword">sizeof</span>(ngl::Vec3),points[0].m_x);
<a name="l00257"></a>00257     vaoSpring-&gt;setNumIndices(2);
<a name="l00258"></a>00258     vaoSpring-&gt;setVertexAttributePointer(0,3,GL_FLOAT,0,0);
<a name="l00259"></a>00259     vaoSpring-&gt;draw();
<a name="l00260"></a>00260     vaoSpring-&gt;unbind();
<a name="l00261"></a>00261     <span class="keyword">delete</span> vaoSpring;
<a name="l00262"></a>00262 }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="class_cloth_a213f8c391b3a666177c58dc4ca4994c4_cgraph.png" border="0" usemap="#class_cloth_a213f8c391b3a666177c58dc4ca4994c4_cgraph_map" alt=""></div>
<map name="class_cloth_a213f8c391b3a666177c58dc4ca4994c4_cgraph_map" id="class_cloth_a213f8c391b3a666177c58dc4ca4994c4_cgraph">
<area shape="rect" id="node3" href="class_cloth_spring.html#a8c797989f9629eedead0a5a03c38ccbd" title="method to get the position of cloth particle at end A from the integrator" alt="" coords="195,5,389,35"/><area shape="rect" id="node7" href="class_cloth_spring.html#ae990bff22ea49f1b2169dfc9129b16cb" title="method to get the position of cloth particle at end B from the integrator" alt="" coords="195,59,389,88"/><area shape="rect" id="node5" href="class_abstract_r_k4_integrator.html#abd52077cbf8729550857c095bb3aa5f5" title="accesor to get the current state value" alt="" coords="437,32,688,61"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a03d78189c0af51a22b1d06152c52c8d6"></a><!-- doxytag: member="Cloth::drawSpring" ref="a03d78189c0af51a22b1d06152c52c8d6" args="(ngl::Vec3 _vertA, ngl::Vec3 _vertB, int _sptype)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Cloth::drawSpring </td>
          <td>(</td>
          <td class="paramtype">ngl::Vec3&nbsp;</td>
          <td class="paramname"> <em>_vertA</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ngl::Vec3&nbsp;</td>
          <td class="paramname"> <em>_vertB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_sptype</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_cloth_8cpp_source.html#l00232">232</a> of file <a class="el" href="_cloth_8cpp_source.html">Cloth.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00233"></a>00233 {
<a name="l00234"></a>00234     std::vector &lt;ngl::Vec3&gt; points(2);
<a name="l00235"></a>00235     points[0] = _vertA;
<a name="l00236"></a>00236     points[1] = _vertB;
<a name="l00237"></a>00237 
<a name="l00238"></a>00238     ngl::VertexArrayObject *vaoSpring = ngl::VertexArrayObject::createVOA(GL_LINES);
<a name="l00239"></a>00239     vaoSpring-&gt;bind();
<a name="l00240"></a>00240     vaoSpring-&gt;setData(2*<span class="keyword">sizeof</span>(ngl::Vec3),points[0].m_x);
<a name="l00241"></a>00241     vaoSpring-&gt;setNumIndices(2);
<a name="l00242"></a>00242     vaoSpring-&gt;setVertexAttributePointer(0,3,GL_FLOAT,0,0);
<a name="l00243"></a>00243     vaoSpring-&gt;draw();
<a name="l00244"></a>00244     vaoSpring-&gt;unbind();
<a name="l00245"></a>00245     <span class="keyword">delete</span> vaoSpring;
<a name="l00246"></a>00246 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a0d9edc32dee9ceaead679f3b904262d2"></a><!-- doxytag: member="Cloth::drawTriCloth" ref="a0d9edc32dee9ceaead679f3b904262d2" args="(const std::string &amp;_shaderName, ngl::TransformStack &amp;_transformStack, ngl::Camera *_cam)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Cloth::drawTriCloth </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>_shaderName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ngl::TransformStack &amp;&nbsp;</td>
          <td class="paramname"> <em>_transformStack</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ngl::Camera *&nbsp;</td>
          <td class="paramname"> <em>_cam</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Draw method for drawing the cloth. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>_shaderName</em>&nbsp;</td><td>the shader </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>_transformStack</em>&nbsp;</td><td>the transformation stack </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>_cam</em>&nbsp;</td><td>the camera </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_cloth_8cpp_source.html#l00108">108</a> of file <a class="el" href="_cloth_8cpp_source.html">Cloth.cpp</a>.</p>

<p>References <a class="el" href="_cloth_8cpp_source.html#l00298">loadMatricesToShader()</a>, <a class="el" href="_cloth_8h_source.html#l00070">m_horiParticles</a>, <a class="el" href="_cloth_8h_source.html#l00090">m_massVert</a>, <a class="el" href="_cloth_8h_source.html#l00170">m_textureID</a>, <a class="el" href="_cloth_8h_source.html#l00095">m_triArray</a>, <a class="el" href="_cloth_8h_source.html#l00155">m_vertData</a>, <a class="el" href="_cloth_8h_source.html#l00075">m_vertParticles</a>, <a class="el" href="_cloth_8h_source.html#l00031">massPoints::nx</a>, <a class="el" href="_cloth_8h_source.html#l00032">massPoints::ny</a>, <a class="el" href="_cloth_8h_source.html#l00033">massPoints::nz</a>, <a class="el" href="_cloth_8h_source.html#l00029">massPoints::u</a>, <a class="el" href="_cloth_8h_source.html#l00030">massPoints::v</a>, <a class="el" href="_cloth_8h_source.html#l00034">massPoints::x</a>, <a class="el" href="_cloth_8h_source.html#l00035">massPoints::y</a>, and <a class="el" href="_cloth_8h_source.html#l00036">massPoints::z</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00113"></a>00113 {
<a name="l00114"></a>00114     <span class="comment">// texture co-ords start at 0,0</span>
<a name="l00115"></a>00115     <span class="comment">// texture steps</span>
<a name="l00116"></a>00116     ngl::Real du=0.9/<a class="code" href="class_cloth.html#aa9fadb08dbfbd2cdcd795a05b1822b8e" title="number of horizontal mass particles">m_horiParticles</a>;
<a name="l00117"></a>00117     ngl::Real dv=0.9/<a class="code" href="class_cloth.html#ab45593ee4b2687538d946c73ddfea492" title="number of vertical mass particles">m_vertParticles</a>;
<a name="l00118"></a>00118 
<a name="l00119"></a>00119     ngl::Real u=0.0;
<a name="l00120"></a>00120     ngl::Real v=0.0;
<a name="l00121"></a>00121 
<a name="l00122"></a>00122     <span class="comment">// a std::vector to store our verts</span>
<a name="l00123"></a>00123     <a class="code" href="structmass_points.html">massPoints</a> vert;
<a name="l00124"></a>00124     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> x =0;x&lt;<a class="code" href="class_cloth.html#aa9fadb08dbfbd2cdcd795a05b1822b8e" title="number of horizontal mass particles">m_horiParticles</a>-1;++x)
<a name="l00125"></a>00125     {
<a name="l00126"></a>00126         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> y=0;y&lt;<a class="code" href="class_cloth.html#ab45593ee4b2687538d946c73ddfea492" title="number of vertical mass particles">m_vertParticles</a>-1;++y)
<a name="l00127"></a>00127         {
<a name="l00128"></a>00128           <span class="comment">/* tri 1</span>
<a name="l00129"></a>00129 <span class="comment">              // counter clock wise</span>
<a name="l00130"></a>00130 <span class="comment">              3</span>
<a name="l00131"></a>00131 <span class="comment">              | \</span>
<a name="l00132"></a>00132 <span class="comment">              |  \</span>
<a name="l00133"></a>00133 <span class="comment">              |   \</span>
<a name="l00134"></a>00134 <span class="comment">              1____2</span>
<a name="l00135"></a>00135 <span class="comment">              */</span>
<a name="l00136"></a>00136               <span class="comment">// the normals are always the same so set them for d first</span>
<a name="l00137"></a>00137 
<a name="l00138"></a>00138               ngl::Vec3 _vN =calcNormal(<a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>[y*m_horiParticles+x]-&gt;getPosition(),<a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>[y*m_horiParticles+x + 1]-&gt;getPosition(),<a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>[y*m_horiParticles+x +m_horiParticles]-&gt;getPosition());
<a name="l00139"></a>00139               vert.<a class="code" href="structmass_points.html#a0b49687782602e90d539fe274cb262ab">nx</a>=_vN.m_x;
<a name="l00140"></a>00140               vert.<a class="code" href="structmass_points.html#a328bdd862b21686f476069538da44d44">ny</a>=_vN.m_y;
<a name="l00141"></a>00141               vert.<a class="code" href="structmass_points.html#a27300220f095c9255c8f219ebecfb329">nz</a>=_vN.m_z;
<a name="l00142"></a>00142 
<a name="l00143"></a>00143               vert.<a class="code" href="structmass_points.html#a70c2beddcf03aedbc956ed0d7ff83c7b">u</a>=u; vert.<a class="code" href="structmass_points.html#a99325e4998c2f3bf9db03ffa0693f40d">v</a>=v+dv;
<a name="l00144"></a>00144 
<a name="l00145"></a>00145               vert.<a class="code" href="structmass_points.html#a1a964651b6791ad84706b981eace6d58">x</a>=<a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>[y*m_horiParticles+x]-&gt;getPosition().m_x;
<a name="l00146"></a>00146               vert.<a class="code" href="structmass_points.html#a4f761af859df314e544bfd2756eae362">y</a>=<a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>[y*m_horiParticles+x]-&gt;getPosition().m_y;
<a name="l00147"></a>00147               vert.<a class="code" href="structmass_points.html#a98ff384b495251f4fe6d4fef035da4d6">z</a>=<a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>[y*m_horiParticles+x]-&gt;getPosition().m_z;
<a name="l00148"></a>00148               <a class="code" href="class_cloth.html#ab1c7dfb259e4f47610545828241dce44" title="vector array for the cloth&amp;#39;s mass particles stored as a traingular mesh">m_triArray</a>.push_back(<a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>[y*m_horiParticles+x]);
<a name="l00149"></a>00149 
<a name="l00150"></a>00150               <a class="code" href="class_cloth.html#a3a98452fbbb8f4adab213e046f694c6c" title="mass point vertices data - for drawing the triangulated cloth mesh">m_vertData</a>.push_back(vert);
<a name="l00151"></a>00151               <span class="comment">// 2</span>
<a name="l00152"></a>00152               vert.<a class="code" href="structmass_points.html#a70c2beddcf03aedbc956ed0d7ff83c7b">u</a>=u+du; vert.<a class="code" href="structmass_points.html#a99325e4998c2f3bf9db03ffa0693f40d">v</a>=v+dv;
<a name="l00153"></a>00153 
<a name="l00154"></a>00154               vert.<a class="code" href="structmass_points.html#a1a964651b6791ad84706b981eace6d58">x</a>=<a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>[y*m_horiParticles+x + 1]-&gt;getPosition().m_x;
<a name="l00155"></a>00155               vert.<a class="code" href="structmass_points.html#a4f761af859df314e544bfd2756eae362">y</a>=<a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>[y*m_horiParticles+x + 1]-&gt;getPosition().m_y;
<a name="l00156"></a>00156               vert.<a class="code" href="structmass_points.html#a98ff384b495251f4fe6d4fef035da4d6">z</a>=<a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>[y*m_horiParticles+x + 1]-&gt;getPosition().m_z;
<a name="l00157"></a>00157               <a class="code" href="class_cloth.html#ab1c7dfb259e4f47610545828241dce44" title="vector array for the cloth&amp;#39;s mass particles stored as a traingular mesh">m_triArray</a>.push_back(<a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>[y*m_horiParticles+x + 1]);
<a name="l00158"></a>00158               <a class="code" href="class_cloth.html#a3a98452fbbb8f4adab213e046f694c6c" title="mass point vertices data - for drawing the triangulated cloth mesh">m_vertData</a>.push_back(vert);
<a name="l00159"></a>00159               <span class="comment">// 3</span>
<a name="l00160"></a>00160               vert.<a class="code" href="structmass_points.html#a70c2beddcf03aedbc956ed0d7ff83c7b">u</a>=u; vert.<a class="code" href="structmass_points.html#a99325e4998c2f3bf9db03ffa0693f40d">v</a>=v;
<a name="l00161"></a>00161 
<a name="l00162"></a>00162               vert.<a class="code" href="structmass_points.html#a1a964651b6791ad84706b981eace6d58">x</a>=<a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>[y*m_horiParticles+x +m_horiParticles]-&gt;getPosition().m_x;
<a name="l00163"></a>00163               vert.<a class="code" href="structmass_points.html#a4f761af859df314e544bfd2756eae362">y</a>=<a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>[y*m_horiParticles+x +m_horiParticles]-&gt;getPosition().m_y;
<a name="l00164"></a>00164               vert.<a class="code" href="structmass_points.html#a98ff384b495251f4fe6d4fef035da4d6">z</a>=<a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>[y*m_horiParticles+x +m_horiParticles]-&gt;getPosition().m_z;
<a name="l00165"></a>00165               <a class="code" href="class_cloth.html#ab1c7dfb259e4f47610545828241dce44" title="vector array for the cloth&amp;#39;s mass particles stored as a traingular mesh">m_triArray</a>.push_back(<a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>[y*m_horiParticles+x +m_horiParticles]);
<a name="l00166"></a>00166               <a class="code" href="class_cloth.html#a3a98452fbbb8f4adab213e046f694c6c" title="mass point vertices data - for drawing the triangulated cloth mesh">m_vertData</a>.push_back(vert);
<a name="l00167"></a>00167 
<a name="l00168"></a>00168 
<a name="l00169"></a>00169           <span class="comment">/* tri 2 w,0,d</span>
<a name="l00170"></a>00170 <span class="comment">        // counter clock wise</span>
<a name="l00171"></a>00171 <span class="comment">         3_____2</span>
<a name="l00172"></a>00172 <span class="comment">          \    |</span>
<a name="l00173"></a>00173 <span class="comment">            \  |</span>
<a name="l00174"></a>00174 <span class="comment">             \ |</span>
<a name="l00175"></a>00175 <span class="comment">              \|</span>
<a name="l00176"></a>00176 <span class="comment">              1</span>
<a name="l00177"></a>00177 <span class="comment"></span>
<a name="l00178"></a>00178 <span class="comment">              */</span>
<a name="l00179"></a>00179               vert.<a class="code" href="structmass_points.html#a0b49687782602e90d539fe274cb262ab">nx</a>=_vN.m_x;
<a name="l00180"></a>00180               vert.<a class="code" href="structmass_points.html#a328bdd862b21686f476069538da44d44">ny</a>=_vN.m_y;
<a name="l00181"></a>00181               vert.<a class="code" href="structmass_points.html#a27300220f095c9255c8f219ebecfb329">nz</a>=_vN.m_z;
<a name="l00182"></a>00182               vert.<a class="code" href="structmass_points.html#a70c2beddcf03aedbc956ed0d7ff83c7b">u</a>=u+du; vert.<a class="code" href="structmass_points.html#a99325e4998c2f3bf9db03ffa0693f40d">v</a>=v+dv;
<a name="l00183"></a>00183 
<a name="l00184"></a>00184               vert.<a class="code" href="structmass_points.html#a1a964651b6791ad84706b981eace6d58">x</a>=<a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>[y*m_horiParticles+x + 1]-&gt;getPosition().m_x;
<a name="l00185"></a>00185               vert.<a class="code" href="structmass_points.html#a4f761af859df314e544bfd2756eae362">y</a>=<a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>[y*m_horiParticles+x + 1]-&gt;getPosition().m_y;
<a name="l00186"></a>00186               vert.<a class="code" href="structmass_points.html#a98ff384b495251f4fe6d4fef035da4d6">z</a>=<a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>[y*m_horiParticles+x + 1]-&gt;getPosition().m_z;
<a name="l00187"></a>00187               <a class="code" href="class_cloth.html#ab1c7dfb259e4f47610545828241dce44" title="vector array for the cloth&amp;#39;s mass particles stored as a traingular mesh">m_triArray</a>.push_back(<a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>[y*m_horiParticles+x + 1]);
<a name="l00188"></a>00188               <a class="code" href="class_cloth.html#a3a98452fbbb8f4adab213e046f694c6c" title="mass point vertices data - for drawing the triangulated cloth mesh">m_vertData</a>.push_back(vert);
<a name="l00189"></a>00189               <span class="comment">// 2</span>
<a name="l00190"></a>00190               vert.<a class="code" href="structmass_points.html#a70c2beddcf03aedbc956ed0d7ff83c7b">u</a>=u+du; vert.<a class="code" href="structmass_points.html#a99325e4998c2f3bf9db03ffa0693f40d">v</a>=v;
<a name="l00191"></a>00191 
<a name="l00192"></a>00192               vert.<a class="code" href="structmass_points.html#a1a964651b6791ad84706b981eace6d58">x</a>=<a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>[y*m_horiParticles+x + m_horiParticles +1]-&gt;getPosition().m_x;
<a name="l00193"></a>00193               vert.<a class="code" href="structmass_points.html#a4f761af859df314e544bfd2756eae362">y</a>=<a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>[y*m_horiParticles+x + m_horiParticles +1]-&gt;getPosition().m_y;
<a name="l00194"></a>00194               vert.<a class="code" href="structmass_points.html#a98ff384b495251f4fe6d4fef035da4d6">z</a>=<a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>[y*m_horiParticles+x + m_horiParticles +1]-&gt;getPosition().m_z;
<a name="l00195"></a>00195               <a class="code" href="class_cloth.html#ab1c7dfb259e4f47610545828241dce44" title="vector array for the cloth&amp;#39;s mass particles stored as a traingular mesh">m_triArray</a>.push_back(<a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>[y*m_horiParticles+x + m_horiParticles +1]);
<a name="l00196"></a>00196               <a class="code" href="class_cloth.html#a3a98452fbbb8f4adab213e046f694c6c" title="mass point vertices data - for drawing the triangulated cloth mesh">m_vertData</a>.push_back(vert);
<a name="l00197"></a>00197               <span class="comment">// 3</span>
<a name="l00198"></a>00198               vert.<a class="code" href="structmass_points.html#a70c2beddcf03aedbc956ed0d7ff83c7b">u</a>=u; vert.<a class="code" href="structmass_points.html#a99325e4998c2f3bf9db03ffa0693f40d">v</a>=v;
<a name="l00199"></a>00199 
<a name="l00200"></a>00200               vert.<a class="code" href="structmass_points.html#a1a964651b6791ad84706b981eace6d58">x</a>=<a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>[y*m_horiParticles+x + m_horiParticles]-&gt;getPosition().m_x;
<a name="l00201"></a>00201               vert.<a class="code" href="structmass_points.html#a4f761af859df314e544bfd2756eae362">y</a>=<a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>[y*m_horiParticles+x + m_horiParticles]-&gt;getPosition().m_y;
<a name="l00202"></a>00202               vert.<a class="code" href="structmass_points.html#a98ff384b495251f4fe6d4fef035da4d6">z</a>=<a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>[y*m_horiParticles+x + m_horiParticles]-&gt;getPosition().m_z;
<a name="l00203"></a>00203               <a class="code" href="class_cloth.html#ab1c7dfb259e4f47610545828241dce44" title="vector array for the cloth&amp;#39;s mass particles stored as a traingular mesh">m_triArray</a>.push_back(<a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>[y*m_horiParticles+x + m_horiParticles]);
<a name="l00204"></a>00204               <a class="code" href="class_cloth.html#a3a98452fbbb8f4adab213e046f694c6c" title="mass point vertices data - for drawing the triangulated cloth mesh">m_vertData</a>.push_back(vert);
<a name="l00205"></a>00205             u+=du;
<a name="l00206"></a>00206           } <span class="comment">// end w loop</span>
<a name="l00207"></a>00207           u=0.0;
<a name="l00208"></a>00208           v+=du;
<a name="l00209"></a>00209       } <span class="comment">// end d loop</span>
<a name="l00210"></a>00210       <span class="comment">// now create the VBO</span>
<a name="l00211"></a>00211 
<a name="l00212"></a>00212         ngl::ShaderLib *shader=ngl::ShaderLib::instance();
<a name="l00213"></a>00213         glEnable (GL_BLEND);
<a name="l00214"></a>00214         glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
<a name="l00215"></a>00215         shader-&gt;use(_shaderName);
<a name="l00216"></a>00216 
<a name="l00217"></a>00217         ngl::VertexArrayObject *vao_tri = ngl::VertexArrayObject::createVOA(GL_TRIANGLES);
<a name="l00218"></a>00218         vao_tri-&gt;bind();
<a name="l00219"></a>00219         vao_tri-&gt;setData(<a class="code" href="class_cloth.html#a3a98452fbbb8f4adab213e046f694c6c" title="mass point vertices data - for drawing the triangulated cloth mesh">m_vertData</a>.size()*<span class="keyword">sizeof</span>(<a class="code" href="structmass_points.html">massPoints</a>),<a class="code" href="class_cloth.html#a3a98452fbbb8f4adab213e046f694c6c" title="mass point vertices data - for drawing the triangulated cloth mesh">m_vertData</a>[0].u);
<a name="l00220"></a>00220         vao_tri-&gt;setVertexAttributePointer(0,3,GL_FLOAT,<span class="keyword">sizeof</span>(<a class="code" href="structmass_points.html">massPoints</a>),5);
<a name="l00221"></a>00221         vao_tri-&gt;setVertexAttributePointer(1,2,GL_FLOAT,<span class="keyword">sizeof</span>(<a class="code" href="structmass_points.html">massPoints</a>),0);
<a name="l00222"></a>00222         vao_tri-&gt;setVertexAttributePointer(2,3,GL_FLOAT,<span class="keyword">sizeof</span>(<a class="code" href="structmass_points.html">massPoints</a>),2);
<a name="l00223"></a>00223         vao_tri-&gt;setNumIndices(<a class="code" href="class_cloth.html#a3a98452fbbb8f4adab213e046f694c6c" title="mass point vertices data - for drawing the triangulated cloth mesh">m_vertData</a>.size());
<a name="l00224"></a>00224 
<a name="l00225"></a>00225         glBindTexture(GL_TEXTURE_2D,<a class="code" href="class_cloth.html#a8082f75ab41e63b44a613c4b0b776c04" title="cloth texture id">m_textureID</a>);
<a name="l00226"></a>00226         <a class="code" href="class_cloth.html#aae971ca955a907ea2e76cf9b8e9b7c55" title="load all the transform values to the shader">loadMatricesToShader</a>(_transformStack,_cam);
<a name="l00227"></a>00227         vao_tri-&gt;draw();
<a name="l00228"></a>00228         vao_tri-&gt;unbind();
<a name="l00229"></a>00229     glDisable(GL_BLEND);
<a name="l00230"></a>00230 }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="class_cloth_a0d9edc32dee9ceaead679f3b904262d2_cgraph.png" border="0" usemap="#class_cloth_a0d9edc32dee9ceaead679f3b904262d2_cgraph_map" alt=""></div>
<map name="class_cloth_a0d9edc32dee9ceaead679f3b904262d2_cgraph_map" id="class_cloth_a0d9edc32dee9ceaead679f3b904262d2_cgraph">
<area shape="rect" id="node3" href="class_cloth.html#aae971ca955a907ea2e76cf9b8e9b7c55" title="load all the transform values to the shader" alt="" coords="207,5,420,35"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="class_cloth_a0d9edc32dee9ceaead679f3b904262d2_icgraph.png" border="0" usemap="#class_cloth_a0d9edc32dee9ceaead679f3b904262d2_icgraph_map" alt=""></div>
<map name="class_cloth_a0d9edc32dee9ceaead679f3b904262d2_icgraph_map" id="class_cloth_a0d9edc32dee9ceaead679f3b904262d2_icgraph">
<area shape="rect" id="node3" href="class_g_l_window.html#a9bd2503dd5f812c10a9481f22ecd3403" title="this is the main gl drawing routine which is called whenever the window needs to..." alt="" coords="207,5,356,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aae971ca955a907ea2e76cf9b8e9b7c55"></a><!-- doxytag: member="Cloth::loadMatricesToShader" ref="aae971ca955a907ea2e76cf9b8e9b7c55" args="(ngl::TransformStack &amp;_tx, ngl::Camera *_cam) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Cloth::loadMatricesToShader </td>
          <td>(</td>
          <td class="paramtype">ngl::TransformStack &amp;&nbsp;</td>
          <td class="paramname"> <em>_tx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ngl::Camera *&nbsp;</td>
          <td class="paramname"> <em>_cam</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td> const<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>load all the transform values to the shader </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>_tx</em>&nbsp;</td><td>the current transform to load </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>_cam</em>&nbsp;</td><td>the camera </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_cloth_8cpp_source.html#l00298">298</a> of file <a class="el" href="_cloth_8cpp_source.html">Cloth.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00302"></a>00302 {
<a name="l00303"></a>00303     ngl::ShaderLib *shader=ngl::ShaderLib::instance();
<a name="l00304"></a>00304 
<a name="l00305"></a>00305     ngl::Mat4 MV;
<a name="l00306"></a>00306     ngl::Mat4 MVP;
<a name="l00307"></a>00307     MV=_tx.getCurrAndGlobal().getMatrix()*_cam-&gt;getViewMatrix() ;
<a name="l00308"></a>00308     MVP=MV*_cam-&gt;getProjectionMatrix();
<a name="l00309"></a>00309     shader-&gt;setShaderParamFromMat4(<span class="stringliteral">&quot;MVP&quot;</span>,MVP);
<a name="l00310"></a>00310 }
</pre></div></p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="class_cloth_aae971ca955a907ea2e76cf9b8e9b7c55_icgraph.png" border="0" usemap="#class_cloth_aae971ca955a907ea2e76cf9b8e9b7c55_icgraph_map" alt=""></div>
<map name="class_cloth_aae971ca955a907ea2e76cf9b8e9b7c55_icgraph_map" id="class_cloth_aae971ca955a907ea2e76cf9b8e9b7c55_icgraph">
<area shape="rect" id="node3" href="class_cloth.html#a0d9edc32dee9ceaead679f3b904262d2" title="Draw method for drawing the cloth." alt="" coords="271,5,420,35"/><area shape="rect" id="node5" href="class_g_l_window.html#a9bd2503dd5f812c10a9481f22ecd3403" title="this is the main gl drawing routine which is called whenever the window needs to..." alt="" coords="471,5,620,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad26926a8404ce36de4a540c38903a6b3"></a><!-- doxytag: member="Cloth::updateCloth" ref="ad26926a8404ce36de4a540c38903a6b3" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Cloth::updateCloth </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>method to update the cloth- forces(internal and external) and update the mass particles according to RK4 integrator state values </p>

<p>Definition at line <a class="el" href="_cloth_8cpp_source.html#l00270">270</a> of file <a class="el" href="_cloth_8cpp_source.html">Cloth.cpp</a>.</p>

<p>References <a class="el" href="_cloth_8cpp_source.html#l00312">collisionWithBalls()</a>, <a class="el" href="_cloth_8h_source.html#l00103">m_applyOctree</a>, <a class="el" href="_cloth_8h_source.html#l00160">m_clothSpringArr</a>, <a class="el" href="_cloth_8h_source.html#l00090">m_massVert</a>, and <a class="el" href="_cloth_8h_source.html#l00155">m_vertData</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00271"></a>00271 {
<a name="l00272"></a>00272     <span class="comment">// 1- spring forces</span>
<a name="l00273"></a>00273     <span class="keywordflow">for</span>(std::vector&lt;ClothSpring&gt;::size_type i=0;i&lt;<a class="code" href="class_cloth.html#ae2aeb11b90b86c1ea9060a7bc2c2a5e2" title="vector containg all the springs in the cloth">m_clothSpringArr</a>.size();++i)
<a name="l00274"></a>00274     {
<a name="l00275"></a>00275         <span class="comment">//springforces- cal forces exerted by spring on both the particles</span>
<a name="l00276"></a>00276         <span class="comment">//store tht in the force variable of particles</span>
<a name="l00277"></a>00277         <a class="code" href="class_cloth.html#ae2aeb11b90b86c1ea9060a7bc2c2a5e2" title="vector containg all the springs in the cloth">m_clothSpringArr</a>[i].m_posA-&gt;m_force+=(<a class="code" href="class_cloth.html#ae2aeb11b90b86c1ea9060a7bc2c2a5e2" title="vector containg all the springs in the cloth">m_clothSpringArr</a>[i].calSpringForces()*-1.0);
<a name="l00278"></a>00278         <a class="code" href="class_cloth.html#ae2aeb11b90b86c1ea9060a7bc2c2a5e2" title="vector containg all the springs in the cloth">m_clothSpringArr</a>[i].m_posB-&gt;m_force+=<a class="code" href="class_cloth.html#ae2aeb11b90b86c1ea9060a7bc2c2a5e2" title="vector containg all the springs in the cloth">m_clothSpringArr</a>[i].calSpringForces();
<a name="l00279"></a>00279     }
<a name="l00280"></a>00280 
<a name="l00281"></a>00281     <span class="comment">// 2 - gravity and update using RK4</span>
<a name="l00282"></a>00282     <span class="keywordflow">for</span>(std::vector&lt;ngl::Vec3&gt;::size_type i=0;i&lt;<a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>.size();++i)
<a name="l00283"></a>00283     {
<a name="l00284"></a>00284         <a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>[i]-&gt;applyGravity();
<a name="l00285"></a>00285         <a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>[i]-&gt;update();
<a name="l00286"></a>00286         <a class="code" href="class_cloth.html#add1ba761667b31248900268047a09065" title="vector array for the cloth&amp;#39;s mass particles">m_massVert</a>[i]-&gt;m_force.set(0.0f,0.0f,0.0f);
<a name="l00287"></a>00287     }
<a name="l00288"></a>00288 
<a name="l00289"></a>00289     <span class="comment">//3 - self collisions</span>
<a name="l00290"></a>00290     <span class="keywordflow">if</span>(<a class="code" href="class_cloth.html#ae060f23b57c590b6afc0f571a44d767e" title="bool to give user the choie of applying octree">m_applyOctree</a> == <span class="keyword">true</span>)
<a name="l00291"></a>00291     {
<a name="l00292"></a>00292         <a class="code" href="class_cloth.html#acdcb21d1a164861da55d5ff238fff544" title="method to check for self collision detection between cloth mass particles to prevent...">collisionWithBalls</a>();
<a name="l00293"></a>00293     }
<a name="l00294"></a>00294     <span class="comment">//clear the verdata for drawing</span>
<a name="l00295"></a>00295     <a class="code" href="class_cloth.html#a3a98452fbbb8f4adab213e046f694c6c" title="mass point vertices data - for drawing the triangulated cloth mesh">m_vertData</a>.clear();
<a name="l00296"></a>00296 }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="class_cloth_ad26926a8404ce36de4a540c38903a6b3_cgraph.png" border="0" usemap="#class_cloth_ad26926a8404ce36de4a540c38903a6b3_cgraph_map" alt=""></div>
<map name="class_cloth_ad26926a8404ce36de4a540c38903a6b3_cgraph_map" id="class_cloth_ad26926a8404ce36de4a540c38903a6b3_cgraph">
<area shape="rect" id="node3" href="class_cloth.html#acdcb21d1a164861da55d5ff238fff544" title="method to check for self collision detection between cloth mass particles to prevent..." alt="" coords="205,59,387,88"/><area shape="rect" id="node5" href="class_abstract_octree.html#aa12fa4d09ef005992b61bf9853478c4f" title="add a T into the tree, add the partile to all the leaves collide with" alt="" coords="447,5,657,35"/><area shape="rect" id="node7" href="class_abstract_octree.html#a5b6dc329a11f2cead34659007f8c62a6" title="check the collision for the Ts in each leaves" alt="" coords="436,59,668,88"/><area shape="rect" id="node9" href="class_abstract_octree.html#a6b57da99d6ae9154ab6183a96655759b" title="clear off all the Ts from the tree" alt="" coords="451,112,653,141"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="class_cloth_ad26926a8404ce36de4a540c38903a6b3_icgraph.png" border="0" usemap="#class_cloth_ad26926a8404ce36de4a540c38903a6b3_icgraph_map" alt=""></div>
<map name="class_cloth_ad26926a8404ce36de4a540c38903a6b3_icgraph_map" id="class_cloth_ad26926a8404ce36de4a540c38903a6b3_icgraph">
<area shape="rect" id="node3" href="class_g_l_window.html#a8901509418ab117e8613d624df9b5666" title="timer event trigered by startTimer" alt="" coords="207,5,383,35"/></map>
</div>
</p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="ac8ddf555eb178ab5aec3675446d991d4"></a><!-- doxytag: member="Cloth::collisionTree" ref="ac8ddf555eb178ab5aec3675446d991d4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_particle_octree.html">ParticleOctree</a>* <a class="el" href="class_cloth.html#ac8ddf555eb178ab5aec3675446d991d4">Cloth::collisionTree</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>octree for collision detection </p>

<p>Definition at line <a class="el" href="_cloth_8h_source.html#l00175">175</a> of file <a class="el" href="_cloth_8h_source.html">Cloth.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae060f23b57c590b6afc0f571a44d767e"></a><!-- doxytag: member="Cloth::m_applyOctree" ref="ae060f23b57c590b6afc0f571a44d767e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_cloth.html#ae060f23b57c590b6afc0f571a44d767e">Cloth::m_applyOctree</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>bool to give user the choie of applying octree </p>

<p>Definition at line <a class="el" href="_cloth_8h_source.html#l00103">103</a> of file <a class="el" href="_cloth_8h_source.html">Cloth.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae2aeb11b90b86c1ea9060a7bc2c2a5e2"></a><!-- doxytag: member="Cloth::m_clothSpringArr" ref="ae2aeb11b90b86c1ea9060a7bc2c2a5e2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="class_cloth_spring.html">ClothSpring</a>&gt; <a class="el" href="class_cloth.html#ae2aeb11b90b86c1ea9060a7bc2c2a5e2">Cloth::m_clothSpringArr</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>vector containg all the springs in the cloth </p>

<p>Definition at line <a class="el" href="_cloth_8h_source.html#l00160">160</a> of file <a class="el" href="_cloth_8h_source.html">Cloth.h</a>.</p>

</div>
</div>
<a class="anchor" id="a78b4b9f5ef642c351a5242a8fab4a2fe"></a><!-- doxytag: member="Cloth::m_fix" ref="a78b4b9f5ef642c351a5242a8fab4a2fe" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_cloth.html#a78b4b9f5ef642c351a5242a8fab4a2fe">Cloth::m_fix</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>bool to keep cloth fixed for simulations </p>

<p>Definition at line <a class="el" href="_cloth_8h_source.html#l00099">99</a> of file <a class="el" href="_cloth_8h_source.html">Cloth.h</a>.</p>

</div>
</div>
<a class="anchor" id="a631f4600e92b1aca4dd58e7d944cd4c5"></a><!-- doxytag: member="Cloth::m_gravity" ref="a631f4600e92b1aca4dd58e7d944cd4c5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ngl::Vec3 <a class="el" href="class_cloth.html#a631f4600e92b1aca4dd58e7d944cd4c5">Cloth::m_gravity</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>forces </p>

<p>Definition at line <a class="el" href="_cloth_8h_source.html#l00150">150</a> of file <a class="el" href="_cloth_8h_source.html">Cloth.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa9fadb08dbfbd2cdcd795a05b1822b8e"></a><!-- doxytag: member="Cloth::m_horiParticles" ref="aa9fadb08dbfbd2cdcd795a05b1822b8e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_cloth.html#aa9fadb08dbfbd2cdcd795a05b1822b8e">Cloth::m_horiParticles</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>number of horizontal mass particles </p>

<p>Definition at line <a class="el" href="_cloth_8h_source.html#l00070">70</a> of file <a class="el" href="_cloth_8h_source.html">Cloth.h</a>.</p>

</div>
</div>
<a class="anchor" id="add1ba761667b31248900268047a09065"></a><!-- doxytag: member="Cloth::m_massVert" ref="add1ba761667b31248900268047a09065" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="class_cloth_particle.html">ClothParticle</a>*&gt; <a class="el" href="class_cloth.html#add1ba761667b31248900268047a09065">Cloth::m_massVert</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>vector array for the cloth's mass particles </p>

<p>Definition at line <a class="el" href="_cloth_8h_source.html#l00090">90</a> of file <a class="el" href="_cloth_8h_source.html">Cloth.h</a>.</p>

</div>
</div>
<a class="anchor" id="a7f46f8974f4a0da8d792913c2f899d8f"></a><!-- doxytag: member="Cloth::m_massVertex" ref="a7f46f8974f4a0da8d792913c2f899d8f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_cloth_particle.html">ClothParticle</a> <a class="el" href="class_cloth.html#a7f46f8974f4a0da8d792913c2f899d8f">Cloth::m_massVertex</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>vector containg all the springs in the cloth </p>

<p>Definition at line <a class="el" href="_cloth_8h_source.html#l00165">165</a> of file <a class="el" href="_cloth_8h_source.html">Cloth.h</a>.</p>

</div>
</div>
<a class="anchor" id="a8082f75ab41e63b44a613c4b0b776c04"></a><!-- doxytag: member="Cloth::m_textureID" ref="a8082f75ab41e63b44a613c4b0b776c04" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GLuint <a class="el" href="class_cloth.html#a8082f75ab41e63b44a613c4b0b776c04">Cloth::m_textureID</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>cloth texture id </p>

<p>Definition at line <a class="el" href="_cloth_8h_source.html#l00170">170</a> of file <a class="el" href="_cloth_8h_source.html">Cloth.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab1c7dfb259e4f47610545828241dce44"></a><!-- doxytag: member="Cloth::m_triArray" ref="ab1c7dfb259e4f47610545828241dce44" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="class_cloth_particle.html">ClothParticle</a>*&gt; <a class="el" href="class_cloth.html#ab1c7dfb259e4f47610545828241dce44">Cloth::m_triArray</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>vector array for the cloth's mass particles stored as a traingular mesh </p>

<p>Definition at line <a class="el" href="_cloth_8h_source.html#l00095">95</a> of file <a class="el" href="_cloth_8h_source.html">Cloth.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3a98452fbbb8f4adab213e046f694c6c"></a><!-- doxytag: member="Cloth::m_vertData" ref="a3a98452fbbb8f4adab213e046f694c6c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="structmass_points.html">massPoints</a>&gt; <a class="el" href="class_cloth.html#a3a98452fbbb8f4adab213e046f694c6c">Cloth::m_vertData</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>mass point vertices data - for drawing the triangulated cloth mesh </p>

<p>Definition at line <a class="el" href="_cloth_8h_source.html#l00155">155</a> of file <a class="el" href="_cloth_8h_source.html">Cloth.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab45593ee4b2687538d946c73ddfea492"></a><!-- doxytag: member="Cloth::m_vertParticles" ref="ab45593ee4b2687538d946c73ddfea492" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_cloth.html#ab45593ee4b2687538d946c73ddfea492">Cloth::m_vertParticles</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>number of vertical mass particles </p>

<p>Definition at line <a class="el" href="_cloth_8h_source.html#l00075">75</a> of file <a class="el" href="_cloth_8h_source.html">Cloth.h</a>.</p>

</div>
</div>
<a class="anchor" id="a214dcb56aa2328e4f2d21ab35d76fbaf"></a><!-- doxytag: member="Cloth::m_windMag" ref="a214dcb56aa2328e4f2d21ab35d76fbaf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="class_cloth.html#a214dcb56aa2328e4f2d21ab35d76fbaf">Cloth::m_windMag</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>wind magnitude that can be added via user interface </p>

<p>Definition at line <a class="el" href="_cloth_8h_source.html#l00107">107</a> of file <a class="el" href="_cloth_8h_source.html">Cloth.h</a>.</p>

</div>
</div>
<a class="anchor" id="a708b4b915911e7c74bc65ae0b0b734f2"></a><!-- doxytag: member="Cloth::mHeight" ref="a708b4b915911e7c74bc65ae0b0b734f2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float <a class="el" href="class_cloth.html#a708b4b915911e7c74bc65ae0b0b734f2">Cloth::mHeight</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>cloth height </p>

<p>Definition at line <a class="el" href="_cloth_8h_source.html#l00085">85</a> of file <a class="el" href="_cloth_8h_source.html">Cloth.h</a>.</p>

</div>
</div>
<a class="anchor" id="a77d2938ecfb108321be9d5252a147117"></a><!-- doxytag: member="Cloth::mWidth" ref="a77d2938ecfb108321be9d5252a147117" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float <a class="el" href="class_cloth.html#a77d2938ecfb108321be9d5252a147117">Cloth::mWidth</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>cloth width </p>

<p>Definition at line <a class="el" href="_cloth_8h_source.html#l00080">80</a> of file <a class="el" href="_cloth_8h_source.html">Cloth.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_cloth_8h_source.html">Cloth.h</a></li>
<li><a class="el" href="_cloth_8cpp_source.html">Cloth.cpp</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 10 May 2013 for ClothSimulation by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
